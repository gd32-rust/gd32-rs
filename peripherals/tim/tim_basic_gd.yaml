# Copyright 2021 The gd32-rs authors.
#
# SPDX-License-Identifier: MIT OR Apache-2.0

# Common features found on all timers.

"TIMER*":
  CTL0:
    ARSE:
      Disabled: [0, "The shadow register for CAR is disabled"]
      Enabled: [1, "The shadow register for CAR is enabled"]
    UPS:
      AnyEvent: [0, "Any of counter overflow/underflow, setting UPG, or update through slave mode, generates an update interrupt or DMA request"]
      CounterOnly: [1, "Only counter overflow/underflow generates an update interrupt or DMA request"]
    UPDIS:
      Enabled: [0, "Update event enabled"]
      Disabled: [1, "Update event disabled"]
    CEN:
      Disabled: [0, "Counter disabled"]
      Enabled: [1, "Counter enabled"]
  DMAINTEN:
    UPIE:
      Disabled: [0, "Update interrupt disabled"]
      Enabled: [1, "Update interrupt enabled"]
  INTF:
    UPIF:
      Clear: [0, "No update interrupt occurred"]
      UpdatePending: [1, "Update interrupt pending."]
  SWEVG:
    UPG:
      Update: [1, "Re-initializes the timer counter and generates an update of the registers."]
  PSC:
    PSC: [0, 0xFFFF]

# TIMER1 has a 32-bit counter
TIMER1:
  CNT:
    CNT: [0, 0xFFFFFFFF]
  CAR:
    CAR: [0, 0xFFFFFFFF]
  "CH?CV":
    "CH?VAL": [0, 0xFFFFFFFF]

# Other timers have 16-bit counters
"TIMER[05],TIMER1[3-6]":
  CNT:
    CNT: [0, 0xFFFF]
  CAR:
    CAR: [0, 0xFFFF]

"TIMER0,TIMER1[3-6]":
  "CH?CV":
    "CH?VAL": [0, 0xFFFF]

# TIMER5 doesn't have compare mode
"TIMER[0-2],TIMER1[3-6]":
  CHCTL[01]_Output:
    "CH?COMCEN":
      Disabled: [0, "Output compare clear disabled"]
      ENabled: [1, "Output compare clear enabled"]
    "CH?COMCTL":
      Frozen: [0, "The comparison between the output compare register CHyCV and the counter CNT has no effect on the outputs"]
      ActiveOnMatch: [1, "Set channel to active level on match. OxCPRE signal is forced high when the counter matches the capture/compare register CHyCV"]
      InactiveOnMatch: [2, "Set channel to inactive level on match. OxCPRE signal is forced low when the counter matches the capture/compare register CHyCV"]
      Toggle: [3, "OxCPRE toggles when CNT=CHyCV"]
      ForceInactive: [4, "OxCPRE is forced low"]
      ForceActive: [5, "OxCPRE is forced high"]
      PwmMode0: [6, "In upcounting, channel is active as long as CNT<CHyCV else inactive. In downcounting, channel is inactive as long as CNT>CHyCV else active"]
      PwmMode1: [7, "Inversely to PwmMode0"]
    "CH?COMSEN":
      Disabled: [0, "Preload register on CHyCV disabled. New values written to CHyCV are taken into account immediately"]
      Enabled: [1, "Preload register on CHyCV enabled. Preload value is loaded into active register on each update event"]
    "CH?COMFEN":
      Slow: [0, "The minimum delay from an edge is 5 clock cycles"]
      Fast: [1, "The minimum delay from an edge is 3 clock cycles"]
    "CH?MS":
      Output: [0, "Channel is configured as output"]
      CI1: [1, "Channel is configured as input, ISx is connected to CI0FE0"]
      CI2: [2, "Channel is configured as input, ISx is connected to CI1FE0"]
      ITS: [3, "Channel is configured as input, ISx is connected to ITS"]
  CHCTL2:
    "CH?NP":
      NotInverted: [0, "Complementary channel is active high"]
      Inverted: [1, "Complementary channel is active low"]
    "CH?P":
      NotInverted: [0, "Channel is active high"]
      Inverted: [1, "Channel is active low"]
    "CH?EN":
      Disabled: [0, "Channel output is disabled"]
      Enabled: [1, "Channel output is enabled"]

# TIMER1, TIMER2 and TIMER13 don't have CH?NEN
"TIMER0,TIMER1[4-6]":
  CHCTL2:
    "CH?NEN":
      Disabled: [0, "Channel complementary output is disabled"]
      Enabled: [1, "Channel complementary output is enabled"]
  CCHP:
    POEN:
      Disabled: [0, "Channel outputs are disabled"]
      Enabled: [1, "Channel outputs are enabled"]
    OAEN:
      Manual: [0, "POEN cannot be set by hardware"]
      Automatic: [1, "POEN can be set by hardware automatically at the next update event"]
    BRKP:
      Inverted: [0, "BRKIN is active low"]
      NotInverted: [1, "BRKIN is active high"]
    BRKEN:
      Disabled: [0, "Break inputs disabled"]
      Enabled: [1, "Break inputs enabled"]
    ROS:
      Disabled: [0, "When POEN is set, the channel output signals are disabled"]
      Enabled: [1, "When POEN is set, the channel output signals are enabled"]
    IOS:
      Disabled: [0, "When POEN is reset, the channel output signals are disabled"]
      Enabled: [1, "When POEN is reset, the channel output signals are enabled"]
    PROT:
      Disabled: [0, "Write protection disabled"]
      Mode0: [1, "Protection mode 0"]
      Mode1: [2, "Protection mode 1"]
      Mode2: [3, "Protection mode 2"]
    DTCFG: [0, 0xFF]

# TIMER13 doesn't have single pulse mode or DMA.
"TIMER?,TIMER1[4-6]":
  CTL0:
    SPM:
      Disabled: [0, "Counter is not stopped at update event"]
      Enabled: [1, "Counter stops counting at the next update event (clearing the CEN bit)"]
  DMAINTEN:
    UPDEN:
      Disabled: [0, "Update DMA request disabled"]
      Enabled: [1, "Update DMA request enabled"]

# TIMER13, TIMER15 and TIMER16 don't have interconnection.
"TIMER[1-9],TIMER14":
  CTL1:
    MMC:
      Reset: [0, "Use UPG bit from SWEVG register"]
      Enable: [1, "Use CEN bit from CTL0 register"]
      Update: [2, "Use the update event"]
